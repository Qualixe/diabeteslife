import{w as W,g as Z,b as U,k as Y,r as b,i as _,d as D,e as j,I as G}from"./index-DNXhzVma.js";function Q(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var F,B;function K(){return B||(B=1,F={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),F}var ee=K();const te=Q(ee);var ne=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function H(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(te[n[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("-->");return{type:"comment",comment:r!==-1?e.slice(4,r):""}}for(var i=new RegExp(ne),s=null;(s=i.exec(e))!==null;)if(s[0].trim())if(s[1]){var l=s[1].trim(),o=[l,""];l.indexOf("=")>-1&&(o=l.split("=")),t.attrs[o[0]]=o[1],i.lastIndex--}else s[2]&&(t.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return t}var re=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,se=/^\s*$/,ae=Object.create(null);function M(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?(function(n){var r=[];for(var i in n)r.push(i+'="'+n[i]+'"');return r.length?" "+r.join(" "):""})(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(M,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var ie={parse:function(e,t){t||(t={}),t.components||(t.components=ae);var n,r=[],i=[],s=-1,l=!1;if(e.indexOf("<")!==0){var o=e.indexOf("<");r.push({type:"text",content:o===-1?e:e.substring(0,o)})}return e.replace(re,function(u,p){if(l){if(u!=="</"+n.name+">")return;l=!1}var f,E=u.charAt(1)!=="/",T=u.startsWith("<!--"),d=p+u.length,c=e.charAt(d);if(T){var k=H(u);return s<0?(r.push(k),r):((f=i[s]).children.push(k),r)}if(E&&(s++,(n=H(u)).type==="tag"&&t.components[n.name]&&(n.type="component",l=!0),n.voidElement||l||!c||c==="<"||n.children.push({type:"text",content:e.slice(d,e.indexOf("<",d))}),s===0&&r.push(n),(f=i[s-1])&&f.children.push(n),i[s]=n),(!E||n.voidElement)&&(s>-1&&(n.voidElement||n.name===u.slice(2,-1))&&(s--,n=s===-1?r:i[s]),!l&&c!=="<"&&c)){f=s===-1?r:i[s].children;var y=e.indexOf("<",d),$=e.slice(d,y===-1?void 0:y);se.test($)&&($=" "),(y>-1&&s+f.length>=0||$!==" ")&&f.push({type:"text",content:$})}}),r},stringify:function(e){return e.reduce(function(t,n){return t+M("",n)},"")}};const P=(e,t)=>{if(!e)return!1;const n=e.props?.children??e.children;return t?n.length>0:!!n},z=e=>{if(!e)return[];const t=e.props?.children??e.children;return e.props?.i18nIsDynamicList?L(t):t},le=e=>Array.isArray(e)&&e.every(b.isValidElement),L=e=>Array.isArray(e)?e:[e],oe=(e,t)=>{const n={...t};return n.props=Object.assign(e.props,t.props),n},R=(e,t,n,r)=>{if(!e)return"";let i="";const s=L(e),l=t?.transSupportBasicHtmlNodes?t.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((o,u)=>{if(_(o)){i+=`${o}`;return}if(b.isValidElement(o)){const{props:p,type:f}=o,E=Object.keys(p).length,T=l.indexOf(f)>-1,d=p.children;if(!d&&T&&!E){i+=`<${f}/>`;return}if(!d&&(!T||E)||p.i18nIsDynamicList){i+=`<${u}></${u}>`;return}if(T&&E===1&&_(d)){i+=`<${f}>${d}</${f}>`;return}const c=R(d,t,n,r);i+=`<${u}>${c}</${u}>`;return}if(o===null){D(n,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(j(o)){const{format:p,...f}=o,E=Object.keys(f);if(E.length===1){const T=p?`${E[0]}, ${p}`:E[0];i+=`{{${T}}}`;return}D(n,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:o});return}D(n,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:o})}),i},ce=(e,t=[],n={})=>{if(!e)return e;const r=Object.keys(n),i=[...t,...r];let s="",l=0;for(;l<e.length;)if(e[l]==="<"){let o=!1;const u=e.slice(l).match(/^<\/(\d+|[a-zA-Z][a-zA-Z0-9-]*)>/);if(u){const p=u[1];(/^\d+$/.test(p)||i.includes(p))&&(o=!0,s+=u[0],l+=u[0].length)}if(!o){const p=e.slice(l).match(/^<(\d+|[a-zA-Z][a-zA-Z0-9-]*)(\s+[\w-]+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s*(\/)?>/);if(p){const f=p[1];(/^\d+$/.test(f)||i.includes(f))&&(o=!0,s+=p[0],l+=p[0].length)}}o||(s+="&lt;",l+=1)}else s+=e[l],l+=1;return s},ue=(e,t,n,r,i,s,l)=>{if(n==="")return[];const o=i.transKeepBasicHtmlNodesFor||[],u=n&&new RegExp(o.map(v=>`<${v}`).join("|")).test(n);if(!e&&!t&&!u&&!l)return[n];const p=t??{},f=v=>{L(v).forEach(m=>{_(m)||(P(m)?f(z(m)):j(m)&&!b.isValidElement(m)&&Object.assign(p,m))})};f(e);const E=ce(n,o,p),T=ie.parse(`<0>${E}</0>`),d={...p,...s},c=(v,A,m)=>{const N=z(v),V=y(N,A.children,m);return le(N)&&V.length===0||v.props?.i18nIsDynamicList?N:V},k=(v,A,m,N,V)=>{v.dummy?(v.children=A,m.push(b.cloneElement(v,{key:N},V?void 0:A))):m.push(...b.Children.map([v],h=>{const a={...h.props};return delete a.i18nIsDynamicList,b.createElement(h.type,{...a,key:N,ref:h.props.ref??h.ref},V?null:A)}))},y=(v,A,m)=>{const N=L(v);return L(A).reduce((h,a,C)=>{const I=a.children?.[0]?.content&&r.services.interpolator.interpolate(a.children[0].content,d,r.language);if(a.type==="tag"){let x=N[parseInt(a.name,10)];!x&&t&&(x=t[a.name]),m.length===1&&!x&&(x=m[0][a.name]),x||(x={});const g=Object.keys(a.attrs).length!==0?oe({props:a.attrs},x):x,S=b.isValidElement(g),w=S&&P(a,!0)&&!a.voidElement,J=u&&j(g)&&g.dummy&&!S,X=j(t)&&Object.hasOwnProperty.call(t,a.name);if(_(g)){const O=r.services.interpolator.interpolate(g,d,r.language);h.push(O)}else if(P(g)||w){const O=c(g,a,m);k(g,O,h,C)}else if(J){const O=y(N,a.children,m);k(g,O,h,C)}else if(Number.isNaN(parseFloat(a.name)))if(X){const O=c(g,a,m);k(g,O,h,C,a.voidElement)}else if(i.transSupportBasicHtmlNodes&&o.indexOf(a.name)>-1)if(a.voidElement)h.push(b.createElement(a.name,{key:`${a.name}-${C}`}));else{const O=y(N,a.children,m);h.push(b.createElement(a.name,{key:`${a.name}-${C}`},O))}else if(a.voidElement)h.push(`<${a.name} />`);else{const O=y(N,a.children,m);h.push(`<${a.name}>${O}</${a.name}>`)}else if(j(g)&&!S){const O=a.children[0]?I:null;O&&h.push(O)}else k(g,I,h,C,a.children.length!==1||!I)}else if(a.type==="text"){const x=i.transWrapTextNodes,g=l?i.unescape(r.services.interpolator.interpolate(a.content,d,r.language)):r.services.interpolator.interpolate(a.content,d,r.language);x?h.push(b.createElement(x,{key:`${a.name}-${C}`},g)):h.push(g)}return h},[])},$=y([{dummy:!0,children:e||[]}],T,L(e||[]));return z($[0])},q=(e,t,n)=>{const r=e.key||t,i=b.cloneElement(e,{key:r});if(!i.props||!i.props.children||n.indexOf(`${t}/>`)<0&&n.indexOf(`${t} />`)<0)return i;function s(){return b.createElement(b.Fragment,null,i)}return b.createElement(s,{key:r})},pe=(e,t)=>e.map((n,r)=>q(n,r,t)),fe=(e,t)=>{const n={};return Object.keys(e).forEach(r=>{Object.assign(n,{[r]:q(e[r],r,t)})}),n},me=(e,t,n,r)=>e?Array.isArray(e)?pe(e,t):j(e)?fe(e,t):(W(n,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null,he=e=>!j(e)||Array.isArray(e)?!1:Object.keys(e).reduce((t,n)=>t&&Number.isNaN(Number.parseFloat(n)),!0);function de({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:u,ns:p,i18n:f,t:E,shouldUnescape:T,...d}){const c=f||Z();if(!c)return W(c,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),e;const k=E||c.t.bind(c)||(w=>w),y={...U(),...c.options?.react};let $=p||k.ns||c.options?.defaultNS;$=_($)?[$]:$||["translation"];const v=R(e,y,c,r),A=o||s?.defaultValue||v||y.transEmptyNodeValue||(typeof r=="function"?Y(r):r),{hashTransKey:m}=y,N=r||(m?m(v||A):v||A);c.options?.interpolation?.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...c.options.interpolation.defaultVariables}:{...c.options.interpolation.defaultVariables});const V=l||t!==void 0&&!c.options?.interpolation?.alwaysFormat||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},h={...s,context:i||s.context,count:t,...l,...V,defaultValue:A,ns:$};let a=N?k(N,h):A;a===N&&A&&(a=A);const C=me(u,a,c,r);let I=C||e,x=null;he(C)&&(x=C,I=e);const g=ue(I,x,a,c,y,h,T),S=n??y.defaultTransParent;return S?b.createElement(S,d,g):g}function ge({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:u,ns:p,i18n:f,t:E,shouldUnescape:T,...d}){const{i18n:c,defaultNS:k}=b.useContext(G)||{},y=f||c||Z(),$=E||y?.t.bind(y);return de({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:s,values:l,defaults:o,components:u,ns:p||$?.ns||k||y?.options?.defaultNS,i18n:y,t:E,shouldUnescape:T,...d})}export{ge as T,Q as g};
